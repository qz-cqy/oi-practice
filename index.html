<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>rui_er 的 OI 做题记录 from 2021.7.12</title>
        <link rel="stylesheet" type="text/css" href="/css/main.css">
        <script>
            function getQueryVariable(variable) {
                var query = window.location.search.substring(1);
                var vars = query.split("&");
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split("=");
                    if (pair[0] == variable) {return pair[1];}
                }
                return '1';
            }
            var from = parseInt(getQueryVariable("from")) - 1;
            console.log(from);
            var url = "list.json";
            var request = new XMLHttpRequest();
            request.open("get", url);
            request.send(null);
            request.onload = function () {
                if (request.status == 200) {
                    var json = JSON.parse(request.responseText);
                    var html = `
                    <table border='1'>
                        <caption>做题记录</caption>
                        <tbody>
                            <tr>
                                <th>题号</th>
                                <th>题目</th>
                                <th>算法难度</th>
                                <th>思维难度</th>
                                <th>代码难度</th>
                                <th>解题报告</th>
                                <th>标签</th>
                            </tr>
                    `;
                    for(var x in json) {
                        if(x < from) continue;
                        if(x > from + 9) break;
                        console.log(x, json[x]);
                        var qwq = "";
                        for(var y in json[x]['href']) {
                            qwq += `
                            <a href="${json[x]['href'][y]['href']}">${json[x]['href'][y]['id']}</a>;
                            `;
                        }
                        var qaq = "";
                        for(var y in json[x]['tags']) {
                            qaq += `
                            <a href="javascript:void(0);">${json[x]['tags'][y]['name']}</a>;
                            `;
                        }
                        html += `
                            <tr>
                                <td>${qwq}</td>
                                <td>${json[x]['name']}</td>
                                <td>${json[x]['difficulty']['algorithm']}</td>
                                <td>${json[x]['difficulty']['thinking']}</td>
                                <td>${json[x]['difficulty']['code']}</td>
                                <td><a href="${json[x]['record']}">Link</a></td>
                                <td>${qaq}</td>
                            </tr>
                        `;
                    }
                    html += `
                        </tbody>
                    </table>
                    `;
                    document.getElementById("record-table").innerHTML = html;
                }
            }
        </script>
    </head>
    <body>
        <p>完善中……</p>
        <div id="record-table">表格生成中……</div>
    </body>
</html>